{% extends 'calculator/layout.html' %}

{% block title %}Мое питание{% endblock %}





{% block content %}

<head>
    <!-- Подключение jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <!-- Подключение jQuery UI -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>


<form method="post">
    {% csrf_token %}
    <label for="product">Выберите продукт:</label>
    <input type="text" id="product-search" name="product-search"><br>
    <label for="weight">Введите вес продукта в граммах:</label>
    <input type="number" min="0" id="weight" name="weight"><br>
    <label for="meal">Введите номер приема пищи:</label>
    <input type="number" min="1" max="4" id="meal" name="meal"><br>
    <input type="submit" value="Добавить продукт">
</form>

    <script>
    $(function() {
        $("#product-search").autocomplete({
            source: '/search_products/',
            minLength: 2,
            select: function(event, ui) {
                $('#product-search').val(ui.item.value);
            }
        });
    });
    </script>
    <hr>
    {% if products %}
        <h2>Завтрак</h2>
        <ul>
            {% for p in products.1 %}
                <li>{{p.0}} - {{p.1}}ккал - {{p.2}}б - {{p.3}}ж - {{p.4}}у - {{p.5}}г</li>
            {% endfor %}
        </ul>
        <h2>Обед</h2>
        <ul>
            {% for p in products.2 %}
                <li>{{p.0}} - {{p.1}}ккал - {{p.2}}б - {{p.3}}ж - {{p.4}}у - {{p.5}}г</li>
            {% endfor %}
        </ul>
        <h2>Ужин</h2>
        <ul>
            {% for p in products.3 %}
                <li>{{p.0}} - {{p.1}}ккал - {{p.2}}б - {{p.3}}ж - {{p.4}}у - {{p.5}}г</li>
            {% endfor %}
        </ul>
        <h2>Перекус</h2>
        <ul>
            {% for p in products.4 %}
                <li>{{p.0}} - {{p.1}}ккал - {{p.2}}б - {{p.3}}ж - {{p.4}}у - {{p.5}}г</li>
            {% endfor %}
        </ul>

    {% endif %}
{% endblock %}